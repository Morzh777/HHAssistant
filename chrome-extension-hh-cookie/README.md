# HH Cookie Collector & Vacancy Saver - Chrome Extension

Расширение для Chrome, которое:
1. Собирает cookies с hh.ru и отправляет их на ваш бэкенд для авторизованного парсинга резюме
2. **Автоматически сохраняет информацию о вакансиях в JSON файлы** при переходе на страницы вакансий

## Установка

1. **Скачайте расширение:**
   - Откройте Chrome
   - Перейдите в `chrome://extensions/`
   - Включите "Режим разработчика" (Developer mode)
   - Нажмите "Загрузить распакованное расширение" (Load unpacked)
   - Выберите папку `chrome-extension-hh-cookie`

2. **Настройте бэкенд (опционально):**
   - Кликните правой кнопкой на иконку расширения
   - Выберите "Параметры" (Options)
   - Укажите URL вашего бэкенда (по умолчанию `http://localhost:3000`)

## Использование

### Автоматическое сохранение вакансий
1. **Просто переходите на страницы вакансий:**
   - Зайдите на любую вакансию на hh.ru (например: https://spb.hh.ru/vacancy/125971543)
   - Расширение автоматически определит ID вакансии
   - Получит полную информацию через HH API
   - Отправит данные на ваш бэкенд
   - Бэкенд сохранит в JSON файл в папку `data/vacancies/`
   - Покажет уведомление об успешном сохранении

### Отправка cookies на бэкенд
1. **Авторизуйтесь на hh.ru:**
   - Зайдите на https://hh.ru
   - Войдите в свой аккаунт

2. **Отправьте cookies:**
   - Кликните на иконку расширения в панели Chrome
   - Нажмите "Отправить cookies"
   - Дождитесь уведомления об успехе

3. **Используйте парсер:**
   ```bash
   curl "http://localhost:3000/resume/html?url=https://spb.hh.ru/resume/YOUR_RESUME_ID"
   ```

## Как это работает

### Автоматическое сохранение вакансий
- Расширение отслеживает изменения вкладок (`chrome.tabs.onUpdated`)
- При переходе на страницу вакансии извлекает ID из URL
- Делает запрос к HH API для получения полной информации о вакансии
- Отправляет данные на бэкенд через POST запрос на `{backendUrl}/vacancy-storage/save`
- Бэкенд сохраняет данные в JSON файл с метаданными в папку `data/vacancies/`
- Файлы сохраняются с именем `vacancy_{ID}_{дата}.json`

### Отправка cookies
- Расширение собирает все cookies с домена `.hh.ru`
- Отправляет их POST запросом на `{backendUrl}/auth/hh/cookies`
- Ваш бэкенд сохраняет cookies и использует их для авторизованных запросов к HH API
- Playwright автоматически подставляет сохранённые cookies при парсинге

## Файлы

- `manifest.json` - конфигурация расширения
- `background.js` - сервис-воркер для обработки кликов
- `popup.html/js` - интерфейс попапа
- `options.html/js` - страница настроек
- `icon.png` - иконка расширения (добавьте самостоятельно)

## Безопасность

- Расширение работает только с доменами `*.hh.ru`
- Cookies отправляются только на настроенный бэкенд
- Никакие данные не передаются третьим лицам
